<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>闭包的使用</title>
  </head>
  <body>
    <script>
      /* 使用闭包实现带缓存的乘法 */
      var mult = (function () {
        var cache = {}
        return function () {
          let key = Array.prototype.join.call(arguments, ',')
          if (cache[key]) {
            return cache[key]
          }
          let n = 1
          for (var i = 0; i < arguments.length; i++) {
            n = n * arguments[i]
          }
          return (cache[key] = n)
        }
      })()
      console.log(mult(1, 2))

      /* map方法的实现原理 */
      Array.prototype.myMap = function (fn) {
        let arr = this
        let value = null
        let res = []
        for (var i = 0; i < arr.length; i++) {
          value = fn(arr[i], i, arr)
          res.push(value)
        }
        return res
      }
      let arr = [1, 3, 4]
      let aaa = [3, 4]
      let list = arr.myMap((item, index, arr) => {
        return item * 10
      })
      console.log(list, 'list')
    </script>
  </body>
</html>
